# .travis.yml file based on:
# https://gist.github.com/dan-blanchard/7045057

language: python
python:
  - "2.7"

recipies:
  git::lfs

before_install:
  # setup git-lfs
  - wget https://github.com/github/git-lfs/releases/download/v1.0.0/git-lfs-linux-amd64-1.0.0.tar.gz
  - tar xzf git-lfs-linux-amd64-1.0.0.tar.gz
  - cd git-lfs-1.0.0
  - sudo ./install.sh
  - cd ..
  - sudo git lfs fetch

  # Setup anaconda
  - wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
  - chmod +x miniconda.sh
  - ./miniconda.sh -b
  - export PATH=/home/travis/miniconda/bin:$PATH
  - conda update --yes conda
  - travis_retry conda install --yes python=$TRAVIS_PYTHON_VERSION numpy bokeh enaml atom matplotlib h5py ipython scipy networkx
  - pip install coveralls

# use conda to install packages
install:
 # Coverage packages are on my binstar channel
  - pip install watchdog

# execute scripts
script:
  - coverage run -m unittest discover
after_script:
  - coveralls

# necessary to run on new container-based infrastructure
sudo: true
